## **표현**

### **Content-Type:표현데이터의 형식설명**

------

Content-Lenght : 바이트단위로 전송
Transfer-Encoding을 사용시 Content-Length 사용불가



## **콘텐츠 협상**

1. 클라이언트가 원하는 표현으로 달라고 서버한테 요청을 함.
2. 클라이언트가 원하는 우선 순위에 맞춰서 서버가 표현 데이터를 만듬.



클라이언트가 선호하는 표현 요청 4가지

- Accept
- Accept-Charset
- Accept-Encoding
- Accept-Language



**클라이언트가 서버에 요청을 할 때**
Accept-Language : ko 를 보내면 웹브라우저가 원하는 언어는 한국어임을 알고 언어를 지원해준다면 한국어를 보내주게된다. 이런일들을 헤더로 처리할 수 있다.

만약 한국어로 요청을 햇을 때 한국어를 지원하지 않는다면 협상의 우선순위를 정할 수 있다.

------

협상과 우선순위1

- Quality Values(q)값을 사용한다.
- 0~1사이의 우선순위인데 클수록 높다.
- 생략시 1
- ex) Accept-Language : ko-KR,ko;q=0.9,en-US;q=0.8,en;q=0.7

------

협상과 우선순위2

- 구체적인 것이 우선한다.
- Accept : text/*,text/plain,text/plain;format=flowed,*/*

위에서 Accept의 우선순위는

1. text/plain;format=flowed
2. text/plain
3. text/*
4. */*

## **전송방식**

- 단순 전송
- 압축 전송
- 분할 전송
- 범위 전송

**단순 전송**

요청을 하면 응답을 주는데 메시지 바디에 대한 Content-Length를 지정

------

**압축전송**

**데이터를 압축해서 전송 사용시**

**Content-Encoding을 통해 어떤식으로 압축햇는지 알려줄 필요 있음**

**ex)Content-Encoding : gzip**

------

**분할전송**



분할정송시에는 Content-Length를 넣어서는 안된다.

처음에는 길이를 예측할 수 없기떄문에



### **일반 정보**



## **Referer : 이전 웹 페이지 주소**

정말 많이 사용되는 정보

- 유입 경로를 분석할 때 많이 사용
- 현재 요청된 페이지의 이전 웹 페이지 주소
- A ->B로 이동하는 경우 B를 요청할 때 Referer: A를 포함해서 요청
- 요청에서 사용한다.
- 참고 : referer는 단어 referrer의 오타..

[03:09](https://www.inflearn.com/course/http-웹-네트워크/unit/61379?tab=note&time=189)

[수정 ](https://www.inflearn.com/course/http-웹-네트워크/unit/61379?tab=note&time=189)삭제

User-Agent: 유저 에이전트 애플리케이션 정보

- 클라이언트의 애플리케이션 정보(웹 브라우저정보 등등)
- 통계 정보
- 어떤 종류의 브라우저에서 버그가 발생하는지 파악하는데 용이하다.
- 요청에서 사용



## **Server : 요청을 처리하는 ORIGIN 서버의 정보**

- **애플리케이션에서 표현데이터를 만들어주는 리얼 서버**
- **응답에서 사용**



## **Date : 메시지가 발생한 날짜와 시간**

응답에서만 사용된다.

특별한 정보



## **Host : 요청한 호스트 정보(도메인)**

 



## **Location : 페이지 리다이렉션**

- 웹 브라우저는 3xx응답의 결과에 Location헤더가 있으면 그 위치로 자동이동
- 201 : Location값은 요청에 의해 생성된 리소스URI
- 3xx(Redirection) : Location값은 요청을 자동으로 리디렉션 하기 위한 대상 리소스를 가리킴



## **Allow: 허용 가능한 HTTP메서드**

허용되지않는 메서드를 요청햇을때 405에서 Allow로 허용가능한 메서드만 응답으로 내려줌



## **Retry-After : 유저가 다음 요청을 하기까지 기다려야 하는시간을 의미**

503 : 서비스가 언제까지 불능인지 알려줌

인증



## **WWW-Authenticate**

- 401 Unauthorized와 함께 사용된다.
- WWW-Authenticate는 제대로 된 인증정보를 만들라는 의미를 알려준다.



### 쿠키

------

HTTP는 무상태(stateless)이기 때문에 모든 요청에 사용자 정보가 포함되도록 개발해야하는데 이는 보안상의 문제나 개발상에도 문제가 있다. 

이런 문제들을 해결하기 위해 쿠키라는 개념이 도입이 되었다.

만약 이준호라는 user이름으로 로그인을 햇으면 Http에서는 Set-Cookie라는 헤더를 만들어서 쿠키를 건내주면 웹브라우저 내부에 있는 쿠키저장소에 user를 저장해놓는다.

이를 통해 로그인 이후에 같은 페이지에 접근시 쿠키값을 무조건 탐색 후 이준호라는 유저정보를 헤더에 자동으로 담아주게된다.

**쿠키의 사용처**

- 사용자 로그인 세션 관리
- 광고 정보 트래킹

쿠키 정보는 항상 서버에 전송된다.

쿠키 사용시 주의점! : 쿠키를 사용할 때 민감한 정보는 절대 저장해서는 안된다.

#### **쿠키 - 생명주기 (Expires , max-age)**

- expires : 만료일이 지나면 쿠키 삭제
- max-age : 0이나 음수를 지정하면 쿠키삭제
- 세션 쿠키 : 만료 날짜를 생략하면 브라우저 종료시 까지만 유지
- 영속 쿠키 : 만료 날짜를 입력하면 해당 날짜까지 유지

#### **쿠키 - 보안**

------

Secure

- 쿠키는 http, https를 구분하지 않고 전송
- Secure를 적용하면 https인 경우에만 전송

HttpOnly

- XSS 공격 방지
- 자바스크립트에서 접근 불가(document.cookie)
- HTTP 전송에만 사용

SameSite

- XSRF 공격 방지

- 요청 도메인과 쿠키에 설정된 도메인이 같은 경우만 쿠키 전송